(function(window,$,undefined){var _block_namespaces_=window._block_namespaces_||(window._block_namespaces_={});var name="LA25464";var LA25464=_block_namespaces_[name]||(_block_namespaces_[name]={});$.extend(LA25464,{"init":init,inqueryBasket:inqueryBasket,inqueryBtnAddEvent:inqueryBtnAddEvent,changePageEvent:changePageEvent});function initColorMatching($selector){var colorInput0=$selector.find('input[name\x3d"color-ma"]');var pagination=$selector.find(".pagination");if(window.$_phoenix){if(pagination.length){var observer=
new MutationObserver(initColorMatchingObserverHandle);observer.observe(colorInput0[0],{attributes:true});initColorMatchingObserverHandle()}}else{var activeLi=$selector.find(".pagination .active");activeLi.siblings().removeClass("active-color-matching");activeLi.addClass("active-color-matching")}function initColorMatchingObserverHandle(){pagination=$selector.find(".pagination");if(pagination.length){var color0=colorInput0.css("color");var activeLi=$selector.find(".pagination .active");var activeBorder=
activeLi.css("border");var newActiveBorder=activeBorder.replace(/(#|rgb\()([0-9A-Fa-f]{6}|\d{1,3},\s*\d{1,3},\s*\d{1,3})(\))/,color0);activeLi.css({"color":color0,"border":newActiveBorder})}}}function init(nodeObj){if(!!!nodeObj)return;var $selector=$("div[data-settingid\x3d"+nodeObj.settingId+"]");$selector.find("style[styleDefault-block]").remove();setTimeout(function(){initColorMatching($selector)},300);$selector.find(".LA25464 .proshow-scroll-list").slick({dots:false,infinite:false,speed:500,
slidesToShow:4,slidesToScroll:1,arrows:true,variableWidth:false,prevArrow:$selector.find(".LeftJ"),nextArrow:$selector.find(".RightJ"),responsive:[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:800,settings:{slidesToShow:2}},{breakpoint:510,settings:{slidesToShow:1}}]});var h=0;var F=0;setTimeout(function(){$(".LA25464 .proshow-scroll-item").each(function(){if($(this).find(".proshow-title").height()>h)h=$(this).find(".proshow-title").height();if($(this).find(".Cls").height()>F)F=$(this).find(".Cls").height()});
$selector.find(".proshow-title").height(h);$selector.find(".Cls").height(F)},500);$(window).resize(function(){setTimeout(function(){var h=0;var F=0;$(".LA25464 .proshow-scroll-item").each(function(){if($(this).find(".proshow-title").height()>h)h=$(this).find(".proshow-title").height();if($(this).find(".Cls").height()>F)F=$(this).find(".Cls").height()});$selector.find(".proshow-title").height(h);$selector.find(".Cls").height(F)},500)});$selector.find("#prodsInquire").attr("action","/phoenix/admin/prod/inquire");
$selector.find("#prodsInquire").attr("method","post")}function inqueryBasket(){$("body").off("click",".pro-detail-basket-container").on("click",".pro-detail-basket-container",function(){if(!!!localStorage)return;var prodId=$(this).attr("prodId");var prodPhotoUrl=!!$("img[bigimgonly\x3dattr_BigImgOnly_leadong]").attr("src")?$("img[bigimgonly\x3dattr_BigImgOnly_leadong]").attr("src"):$(this).attr("prodPhotoUrl");var prodName=$(this).attr("prodName");var prodSelectParam="";var selectParamStr="";var skuParamStr=
"";var quantityStr="";var quantity="";var isNewProd="1";if(!isNewProd){var skuValueId=$("#skuValueId").val()||"";skuParamStr=skuValueId;prodSelectParam='\x3cinput type\x3d"hidden" name\x3d"skuParam" value\x3d\''+skuValueId+'\' /\x3e\x3cinput type\x3d"hidden" name\x3d"selectParam" value\x3d"" /\x3e';prodPhotoUrl=!!$("img[bigimgonly\x3dattr_BigImgOnly_leadong]").attr("src")?$("img[bigimgonly\x3dattr_BigImgOnly_leadong]").attr("src"):!!$("#skuImgUrl").val()?$("#skuImgUrl").val():prodPhotoUrl;selectParamStr=
""}else{var aChoosed=$(".prodNod_prodSKU").eq(0).find("a.choosed");if(aChoosed[0]!=undefined){var selectParam={};aChoosed.each(function(i,n){var name=$(n).parentsUntil(".this-description-table-container").children("th").html();var selectValue=$(n).attr("title");selectParam[name]=selectValue});selectParamStr=$.toJSON(selectParam);prodSelectParam='\x3cinput type\x3d"hidden" name\x3d"skuParam" value\x3d"" /\x3e\x3cinput type\x3d"hidden" name\x3d"selectParam" value\x3d\''+selectParamStr+"' /\x3e";skuParamStr=
""}}quantity=$("input.order-quan-input").eq(0).val()||"";quantityStr='\x3cinput type\x3d"hidden" name\x3d"quantity" value\x3d\''+quantity+"' /\x3e";var prodArray=phoenixSite.basket.prodIdArray||[];if(prodArray.length==0){$("#prodInquireBasket ul").append("\x3cli prodId\x3d"+prodId+'\x3e\x3ca class\x3d"basket-list-img" href\x3d"javaScript:;" title\x3d""\x3e\x3cimg src\x3d"'+prodPhotoUrl+'" height\x3d"45"\x3e\x3c/a\x3e\x3ca href\x3d"javaScript:;" title\x3d"" class\x3d"basket-list-name"\x3e'+prodName+
"\x3c/a\x3e"+prodSelectParam+quantityStr+'\x3ca href\x3d"javaScript:;" class\x3d"basket-list-delate"\x3e'+phoenixSite.message(phoenixSite.lanEdition,"phoenix_common_delete")+"\x3c/a\x3e\x3c/li\x3e");var selectInquireCount=$("#selectInquireCount").html();$("#selectInquireCount").html(parseInt(selectInquireCount)+1);$("#shoppingIconNum").html(parseInt(selectInquireCount)+1);$("#shoppingIconNum").removeClass("shoppingIconNum").addClass("shoppingIconNum");$(".shoppingBasketIcon").show();$("#prodInquireBasket").show();
prodArray.push({"prodId":prodId,"prodPhotoUrl":prodPhotoUrl,"skuParam":skuParamStr,"selectParam":selectParamStr,"prodName":prodName,"quantity":quantity})}else{var isSimilar=false;prodArray.forEach(function(n){var item=n;var itemJson=item;if(itemJson.prodId==prodId)if(selectParamStr==itemJson.selectParam&&skuParamStr==itemJson.skuParam){isSimilar=true;return}});if(!isSimilar){$("#prodInquireBasket ul").append("\x3cli prodId\x3d"+prodId+'\x3e\x3ca href\x3d"javaScript:;" title\x3d""\x3e\x3cimg src\x3d"'+
prodPhotoUrl+'" height\x3d"45"\x3e\x3c/a\x3e\x3ca href\x3d"javaScript:;" title\x3d"" class\x3d"basket-list-name"\x3e'+prodName+"\x3c/a\x3e"+prodSelectParam+quantityStr+'\x3ca href\x3d"javaScript:;" class\x3d"basket-list-delate"\x3e'+phoenixSite.message(phoenixSite.lanEdition,"phoenix_common_delete")+"\x3c/a\x3e\x3c/li\x3e");var selectInquireCount=$("#selectInquireCount").html();$("#selectInquireCount").html(parseInt(selectInquireCount)+1);$("#shoppingIconNum").html(parseInt(selectInquireCount)+1);
prodArray.push({"prodId":prodId,"prodPhotoUrl":prodPhotoUrl,"skuParam":skuParamStr,"selectParam":selectParamStr,"prodName":prodName,"quantity":quantity})}}localStorage.setItem("baksetProdArray",JSON.stringify(prodArray));phoenixSite.basket.bindDeleteInquireProd()})}function inqueryBtnAddEvent(productId,_widgetClass){$(".inquireBtn #prodInquire").unbind("click").bind("click",function(){var isNewProd="1";var inquireParam={};if(isNewProd){var aChoosed=$(".prodNod_prodSKU a.choosed");var selectParam=
{};if(aChoosed[0]!=undefined)aChoosed.each(function(i,n){var name=$(n).parent().parent().parent().children("th").html();var selectValue=$(n).attr("title");selectParam[name]=selectValue});inquireParam={prodId:productId,selectParam:$.toJSON(selectParam),quantity:$(".prodNod_selectNum .order-quan-input").val()}}else{var aChoosed=$(".prodNod_prodSKU a.choosed");var selectParam={};if(aChoosed[0]!=undefined)aChoosed.each(function(i,n){var name=$(n).parent().parent().parent().children("th").html();var selectValue=
$(n).attr("title");selectParam[name]=selectValue});inquireParam={prodId:productId,selectParam:$.toJSON(selectParam),quantity:$(".prodNod_selectNum .order-quan-input").val()}}var arrayInquire=new Array;arrayInquire.push(inquireParam);var inquireMutualType=$("."+_widgetClass+" input[name\x3dinquireMutualType]").val();var inquireParams=$.toJSON(arrayInquire);if(inquireMutualType=="1"){$("."+_widgetClass+" input[name\x3dinquireParams]").val(inquireParams);$("."+_widgetClass+" #prodInquire").submit()}else{var curBackendPageId=
$(".inquireBtn input[name\x3dcurBackendPageId]").eq(0).val();var data={"inquireParams":inquireParams,"cur_backend_pageId":curBackendPageId,"productId":productId};var _options={url:"/phoenix/admin/prod/inquire/popup",type:"post",data:data,done:function(xhr){$("#form_inquire_popup_div").remove();$("body").append(xhr);$("#form_inquire_popup_div").fadeIn();if($(".pop-inquire .pop-main .control-group.submitGroup").length>0&&$("#formsubmitClone").length==0){var submitGroupAdd=$(".pop-inquire .pop-main .control-group.submitGroup").clone();
$("#form_inquire_popup_div.pop-inquire .pop-box").append(submitGroupAdd);if($("#form_inquire_popup_div.pop-inquire .pop-box\x3e.submitGroup").find("button").length==1)$("#form_inquire_popup_div.pop-inquire .pop-box\x3e.submitGroup").find("button").eq(0).attr("id","formsubmitClone");if($("#form_inquire_popup_div.pop-inquire .pop-box\x3e.submitGroup").find("button").length==2){$("#form_inquire_popup_div.pop-inquire .pop-box\x3e.submitGroup").find("button").eq(0).attr("id","formsubmitClone");$("#form_inquire_popup_div.pop-inquire .pop-box\x3e.submitGroup").find("button").eq(1).attr("id",
"formresetClone")}}}};phoenixSite.ajax(_options)}})}function changePageEvent(params){window["temp"+params.settingId]=function(settingId,pageNum,ajaxParam){if(pageNum==undefined)pageNum="1";var ajaxUrl="/phoenix/admin/component/dynamic/node/"+settingId+"/"+params.nodeId+"/"+params.appId;var ajaxOption={url:ajaxUrl,type:"post",cache:false,data:{appIsDev:params.appIsDev,pageNum:pageNum},dataType:"html"};$.ajax(ajaxOption).done(function(response,textStatus,jqXHR){response=response.toString().replace(/(<li\s+class=")[^"]*(")/,
"$1"+"active-color-matching"+"$2");$("#siteblocks-setting-wrap-"+settingId+"  .wra").html(response)}).always(function(response,textStatus,jqXHR){})}}})(window,jQuery);